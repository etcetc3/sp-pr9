// ============================================================
// HARDCODED ODDS - UFC EVENTS
// Source: BetOnline (Screenshots provided)
// Last Updated: 2025-01-20
// ============================================================

export const HARDCODED_ODDS = {
  // ============================================================
  // UFC FIGHT NIGHT 265: TSARUKYAN VS. HOOKER (November 22)
  // ============================================================
  
  "tsarukyan-hooker": {
    "Arman Tsarukyan": -500,
    "Daniel Hooker": +375,
  },
  
  "muhammad-garry": {
    "Belal Muhammad": +210,
    "Ian Garry": -250,
  },
  
  "oezdemir-menifield": {
    "Volkan Oezdemir": -225,
    "Alonzo Menifield": +190,
  },
  
  "hermansson-orolbai": {
    "Jack Hermansson": +205,
    "Myktybek Orolbai": -245,
  },
  
  // ðŸ”¥ FIX: Add variant with "Orolbay"
  "hermansson-orolbay": {
    "Jack Hermansson": +205,
    "Myktybek Orolbay": -245,
  },
  
  "cortes-acosta-gaziev": {
    "Waldo Cortes-Acosta": -158,
    "Shamil Gaziev": +138,
  },
  
  // ðŸ”¥ FIX: Serghei vs Sergey
  "spivak-gaziev": {
    "Sergey Spivak": +120,
    "Shamil Gaziev": -140,
  },
  "spivac-gaziev": {
    "Serghei Spivac": +120,
    "Shamil Gaziev": -140,
  },
  
  "perez-almabaev": {
    "Alex Perez": +163,
    "Asu Almabaev": -183,
  },
  
  "almabaev-riley": {
    "Asu Almabaev": -180,
    "Luke Riley": +160,
  },
  
  // ðŸ”¥ FIX: Riley vs Grad (beide Reihenfolgen)
  "riley-grad": {
    "Luke Riley": +160,
    "Bogdan Grad": -180,
  },
  "grad-riley": {
    "Bogdan Grad": -180,
    "Luke Riley": +160,
  },
  
  "yakhyaev-cerqueira": {
    "Abdulrakhman Yakhyaev": -1800,
    "Raffael Cerqueira": +900,
  },
  
  "ulanbekov-horiguchi": {
    "Tagir Ulanbekov": -194,
    "Kyoji Horiguchi": +169,
  },
  
  "almakhan-topuria": {
    "Bekzat Almakhan": +100,
    "Aleksandre Topuria": -120,
  },
  
  // ðŸ”¥ FIX: Ismael vs Ismail
  "naurdiev-loder": {
    "Ismael Naurdiev": -140,
    "Ryan Loder": +120,
  },
  "naurdiev-loder-alt": {
    "Ismail Naurdiev": -140,
    "Ryan Loder": +120,
  },
  
  // ðŸ”¥ FIX: Loder vs Aliev (separate fight)
  "loder-aliev": {
    "Ryan Loder": +120,
    "Nurullo Aliev": -140,
  },
  "aliev-loder": {
    "Nurullo Aliev": -140,
    "Ryan Loder": +120,
  },
  
  // ðŸ”¥ FIX: Rock vs Dalby (separate fight)
  "rock-dalby": {
    "Shem Rock": +235,
    "Nicolas Dalby": -265,
  },
  "dalby-rock": {
    "Nicolas Dalby": -265,
    "Shem Rock": +235,
  },
  
  // ðŸ”¥ FIX: Aliev vs Rock (NEW - separate fight)
  "aliev-rock": {
    "Nurullo Aliev": -275,
    "Shem Rock": +235,
  },
  "rock-aliev": {
    "Shem Rock": +235,
    "Nurullo Aliev": -275,
  },
  
  "dalby-izagakhmaev": {
    "Nicolas Dalby": +265,
    "Saygid Izagakhmaev": -315,
  },
  
  // ðŸ”¥ FIX: Bujlo vs BujÅ‚o (Polish character)
  "bujlo-freeman": {
    "Marek Bujlo": +170,
    "Denzel Freeman": -195,
  },
  "bujÅ‚o-freeman": {
    "Marek BujÅ‚o": +170,
    "Denzel Freeman": -195,
  },

  // ============================================================
  // UFC 323: DVALISHVILI VS. YAN 2 (December 6)
  // ============================================================
  
  "dvalishvili-yan": {
    "Merab Dvalishvili": -500,
    "Petr Yan": +375,
  },
  
  "pantoja-van": {
    "Alexandre Pantoja": -220,
    "Josh Van": +185,
  },
  
  // ============================================================
  // ALTERNATE KEY FORMATS (for better matching)
  // ============================================================
  
  "arman-tsarukyan-daniel-hooker": {
    "Arman Tsarukyan": -500,
    "Daniel Hooker": +375,
  },
  "arman-tsarukyan-dan-hooker": {
    "Arman Tsarukyan": -500,
    "Dan Hooker": +375,
  },
  
  "belal-muhammad-ian-garry": {
    "Belal Muhammad": +210,
    "Ian Garry": -250,
  },
  "belal-muhammad-ian-machado-garry": {
    "Belal Muhammad": +210,
    "Ian Machado Garry": -250,
  },
  
  "volkan-oezdemir-alonzo-menifield": {
    "Volkan Oezdemir": -225,
    "Alonzo Menifield": +190,
  },
  
  "jack-hermansson-myktybek-orolbai": {
    "Jack Hermansson": +205,
    "Myktybek Orolbai": -245,
  },
  "jack-hermansson-myktybek-orolbay": {
    "Jack Hermansson": +205,
    "Myktybek Orolbay": -245,
  },
  
  "waldo-cortes-acosta-shamil-gaziev": {
    "Waldo Cortes-Acosta": -158,
    "Shamil Gaziev": +138,
  },
  
  "sergey-spivak-shamil-gaziev": {
    "Sergey Spivak": +120,
    "Shamil Gaziev": -140,
  },
  "serghei-spivac-shamil-gaziev": {
    "Serghei Spivac": +120,
    "Shamil Gaziev": -140,
  },
  
  "alex-perez-asu-almabaev": {
    "Alex Perez": +163,
    "Asu Almabaev": -183,
  },
  
  "asu-almabaev-luke-riley": {
    "Asu Almabaev": -180,
    "Luke Riley": +160,
  },
  "luke-riley-bogdan-grad": {
    "Luke Riley": +160,
    "Bogdan Grad": -180,
  },
  
  "abdulrakhman-yakhyaev-raffael-cerqueira": {
    "Abdulrakhman Yakhyaev": -1800,
    "Raffael Cerqueira": +900,
  },
  
  "tagir-ulanbekov-kyoji-horiguchi": {
    "Tagir Ulanbekov": -194,
    "Kyoji Horiguchi": +169,
  },
  "kyoji-horiguchi-tagir-ulanbekov": {
    "Kyoji Horiguchi": +169,
    "Tagir Ulanbekov": -194,
  },
  
  "bekzat-almakhan-aleksandre-topuria": {
    "Bekzat Almakhan": +100,
    "Aleksandre Topuria": -120,
  },
  
  "ismael-naurdiev-ryan-loder": {
    "Ismael Naurdiev": -140,
    "Ryan Loder": +120,
  },
  "ismail-naurdiev-ryan-loder": {
    "Ismail Naurdiev": -140,
    "Ryan Loder": +120,
  },
  
  "ryan-loder-nurullo-aliev": {
    "Ryan Loder": +120,
    "Nurullo Aliev": -140,
  },
  "nurullo-aliev-ryan-loder": {
    "Nurullo Aliev": -140,
    "Ryan Loder": +120,
  },
  
  "shem-rock-nurullo-aliev": {
    "Shem Rock": +235,
    "Nurullo Aliev": -275,
  },
  "nurullo-aliev-shem-rock": {
    "Nurullo Aliev": -275,
    "Shem Rock": +235,
  },
  
  "shem-rock-nicolas-dalby": {
    "Shem Rock": +235,
    "Nicolas Dalby": -265,
  },
  "nicolas-dalby-shem-rock": {
    "Nicolas Dalby": -265,
    "Shem Rock": +235,
  },
  
  "nicolas-dalby-saygid-izagakhmaev": {
    "Nicolas Dalby": +265,
    "Saygid Izagakhmaev": -315,
  },
  "saygid-izagakhmaev-nicolas-dalby": {
    "Saygid Izagakhmaev": -315,
    "Nicolas Dalby": +265,
  },
  
  "marek-bujlo-denzel-freeman": {
    "Marek Bujlo": +170,
    "Denzel Freeman": -195,
  },
  "marek-bujÅ‚o-denzel-freeman": {
    "Marek BujÅ‚o": +170,
    "Denzel Freeman": -195,
  },
  
  "merab-dvalishvili-petr-yan": {
    "Merab Dvalishvili": -500,
    "Petr Yan": +375,
  },
  
  "alexandre-pantoja-josh-van": {
    "Alexandre Pantoja": -220,
    "Josh Van": +185,
  },
};

// Keep the rest of the helper functions the same...

// ============================================================
// HELPER: Get Odds by Fighter Names
// ============================================================
export function getOddsByFighters(fighter1Name, fighter2Name) {
  if (!fighter1Name || !fighter2Name) return null;

  // Normalize names (lowercase, remove special chars)
  const normalize = (name) => 
    name.toLowerCase()
      .replace(/[^a-z\s]/g, '')
      .trim()
      .split(/\s+/)
      .join('-');

  const f1 = normalize(fighter1Name);
  const f2 = normalize(fighter2Name);

  // Try both combinations
  const key1 = `${f1}-${f2}`;
  const key2 = `${f2}-${f1}`;

  console.log('ðŸ” Looking for odds:', { 
    fighter1: fighter1Name, 
    fighter2: fighter2Name,
    key1, 
    key2 
  });

  let fightOdds = HARDCODED_ODDS[key1] || HARDCODED_ODDS[key2];

  if (!fightOdds) {
    // Try partial match (last names only)
    const lastName1 = fighter1Name.split(' ').pop().toLowerCase();
    const lastName2 = fighter2Name.split(' ').pop().toLowerCase();

    console.log('ðŸ” Trying last names:', { lastName1, lastName2 });

    for (const [key, odds] of Object.entries(HARDCODED_ODDS)) {
      if (key.includes(lastName1) && key.includes(lastName2)) {
        console.log('âœ… Found by last names:', key);
        fightOdds = odds;
        break;
      }
    }
  }

  if (!fightOdds) {
    console.log('âŒ No odds found for:', fighter1Name, 'vs', fighter2Name);
    return null;
  }

  console.log('âœ… Found odds:', fightOdds);

  // Match fighter names to odds
  let fighter1Odds = null;
  let fighter2Odds = null;

  const fighterNames = Object.keys(fightOdds);
  
  // Try exact match first
  for (const name of fighterNames) {
    const normName = normalize(name);
    if (normName === f1) fighter1Odds = fightOdds[name];
    if (normName === f2) fighter2Odds = fightOdds[name];
  }

  // Try last name match
  if (!fighter1Odds || !fighter2Odds) {
    const lastName1 = normalize(fighter1Name.split(' ').pop());
    const lastName2 = normalize(fighter2Name.split(' ').pop());
    
    for (const name of fighterNames) {
      const normName = normalize(name);
      if (!fighter1Odds && normName.includes(lastName1)) {
        fighter1Odds = fightOdds[name];
      }
      if (!fighter2Odds && normName.includes(lastName2)) {
        fighter2Odds = fightOdds[name];
      }
    }
  }

  // Fallback: use order
  if (!fighter1Odds || !fighter2Odds) {
    const oddsArray = Object.values(fightOdds);
    fighter1Odds = fighter1Odds || oddsArray[0];
    fighter2Odds = fighter2Odds || oddsArray[1];
  }

  console.log('âœ… Matched odds:', {
    fighter1: fighter1Name,
    fighter1Odds,
    fighter2: fighter2Name,
    fighter2Odds
  });

  return {
    fighter1Odds,
    fighter2Odds,
  };
}

// ============================================================
// HELPER: Convert Odds to Implied Probability
// ============================================================
export function oddsToImpliedProbability(odds) {
  if (!odds || odds === 0) return null;
  
  const numeric = Number(odds);
  if (!Number.isFinite(numeric)) return null;
  
  if (numeric > 0) {
    // Underdog: 100 / (odds + 100)
    return 100 / (numeric + 100);
  } else {
    // Favorite: -odds / (-odds + 100)
    return (-numeric) / ((-numeric) + 100);
  }
}

// ============================================================
// HELPER: Get All Available Fights
// ============================================================
export function getAllAvailableFights() {
  return Object.keys(HARDCODED_ODDS);
}

// ============================================================
// HELPER: Check if Fight Has Odds
// ============================================================
export function hasFightOdds(fighter1Name, fighter2Name) {
  return getOddsByFighters(fighter1Name, fighter2Name) !== null;
}